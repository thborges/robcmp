
interface bus {
	void setup(int32 speed);
	void write(int8 b);
}

type mcu {

	spi implements bus {
		speed = int32(0);
		lastb = 0;

		void setup(int32 s) {
			speed = s;
		}

		void write(int8 b) {
			lastb = b;
		}
	}
}

int16 main() {
	m = mcu();

	if m.spi.speed != 0 or m.spi.lastb != 0 {
		return 1;
	}

	m.spi.setup(1000);
	m.spi.write(8);
	
	if m.spi.speed != 1000 or m.spi.lastb != 8 {
		return 1;
	}

	return 0;
}

